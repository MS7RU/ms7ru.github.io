<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #mazeContainer {
            display: grid;
            gap: 2px;
        }
        .cell {
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .wall {
            background-image: url('1.png');
            background-size: cover;
        }
        .start {
            background-color: #0f0;
        }
        .end {
            background-color: #f00;
        }
        .player {
            background-image: url('c.png');
            background-size: cover;
        }
    </style>
</head>
<body>
    <div id="mazeContainer"></div>
    <script>
        const gridWidth = 16;
        const gridHeight = 9;
        const start = {x: 1, y: 1};
        const end = {x: gridWidth - 2, y: gridHeight - 2};
        let player = {...start};
        let maze = [];

        function generateMaze(width, height) {
            const maze = Array.from({ length: height }, () => Array(width).fill(1));
            const stack = [{ x: 1, y: 1 }];

            maze[1][1] = 0;

            while (stack.length) {
                const { x, y } = stack.pop();
                const directions = shuffle([
                    { x: 0, y: -2 },
                    { x: 0, y: 2 },
                    { x: -2, y: 0 },
                    { x: 2, y: 0 }
                ]);

                for (const { x: dx, y: dy } of directions) {
                    const nx = x + dx;
                    const ny = y + dy;

                    if (nx > 0 && ny > 0 && nx < width - 1 && ny < height - 1 && maze[ny][nx] === 1) {
                        maze[ny][nx] = 0;
                        maze[y + dy / 2][x + dx / 2] = 0;
                        stack.push({ x: nx, y: ny });
                    }
                }
            }

            maze[end.y][end.x] = 0;
            return maze;
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createMaze() {
            const mazeContainer = document.getElementById('mazeContainer');
            mazeContainer.style.gridTemplateColumns = `repeat(${gridWidth}, 30px)`;
            mazeContainer.style.gridTemplateRows = `repeat(${gridHeight}, 30px)`;
            mazeContainer.innerHTML = '';
            for (let y = 0; y < maze.length; y++) {
                for (let x = 0; x < maze[y].length; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    if (maze[y][x] === 1) {
                        cell.classList.add('wall');
                    } else if (x === start.x && y === start.y) {
                        cell.classList.add('start');
                    } else if (x === end.x && y === end.y) {
                        cell.classList.add('end');
                    } else if (x === player.x && y === player.y) {
                        cell.classList.add('player');
                    }
                    mazeContainer.appendChild(cell);
                }
            }
        }

        function movePlayer(x, y) {
            const newX = player.x + x;
            const newY = player.y + y;
            if (maze[newY][newX] !== 1) {
                player.x = newX;
                player.y = newY;
                createMaze();
                if (player.x === end.x && player.y === end.y) {
                    setTimeout(() => {
                        alert('You win!');
                        resetGame();
                    }, 10);
                }
            }
        }

        function resetGame() {
            player = {...start};
            maze = generateMaze(gridWidth, gridHeight);
            createMaze();
        }

        window.addEventListener('keydown', (e) => {
            switch (e.key) {
                case 'ArrowUp':
                    movePlayer(0, -1);
                    break;
                case 'ArrowDown':
                    movePlayer(0, 1);
                    break;
                case 'ArrowLeft':
                    movePlayer(-1, 0);
                    break;
                case 'ArrowRight':
                    movePlayer(1, 0);
                    break;
            }
        });

        maze = generateMaze(gridWidth, gridHeight);
        createMaze();
    </script>
</body>
</html>
